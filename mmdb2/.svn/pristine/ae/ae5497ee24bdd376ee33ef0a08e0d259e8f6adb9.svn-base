package com.mmdb.model.security.storage;

import java.util.List;

import org.springframework.stereotype.Component;

import com.mmdb.core.framework.neo4j.storage.NodeStorage;
import com.mmdb.core.log.Log;
import com.mmdb.core.log.LogFactory;
import com.mmdb.model.security.Organization;

@Component("organizationStorage")
public class OrganizationStorage extends NodeStorage<Organization> {
    private Log log = LogFactory.getLogger("OrganizationStorage");

    /**
     * 根据id获取组织结构
     *
     * @param id 组织机构id
     * @return
     * @throws Exception
     */
    public Organization getById(String id) throws Exception {
        List<Organization> list = this.getByProperty("id", id);
        if (list.size() == 1) {
            return list.get(0);
        } else if (list.size() > 1) {
            log.eLog("Organization[" + id + "]not unique.");
            throw new Exception("Organization[" + id + "]not unique.");
        } else {
            return null;
        }
    }
}